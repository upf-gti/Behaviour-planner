<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, height=device-height,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Behaviour Planner Player</title>
    <style type='text/css'>
		html, body {
			width: 100%;
			height: 100%;
			margin: 0;
			padding: 0;
		}
	</style>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body >
    <!--Behaviour planner core and its de dependencies-->
    <script src="../src/libs/gl-matrix-min-2_8.js"></script>
    <script src="./js/libs/litegl.js"></script>
    <script src="../src/libs/litegraph.js"></script>
    <script src="../src/libs/HBTree.js"></script>
    <script src="../src/libs/extra/onecore.js"></script>
    <script src="../src/libs/extra/Canvas2DtoWebGL.js"></script>
    <!--Web app dependencies-->
    <!--<script src="js/libs/litegui.js"></script>
    <script src="js/libs/HBTEditor.js"></script>
    <script src="js/libs/litegraph.js"></script>-->

    <!--Web app core-->
    <script src="../src/behaviourNodes.js"></script>
    <script src="../src/behaviourGraph.js"></script>
    <script src="../src/behaviourPlanner.js"></script>
    <script src="../src/behaviourPresenter.js"></script>
    <script src="../src/timeline_node.js"></script>
    <script src="../src/utils.js"></script>
    <script src="./js/streamer.js"></script>
    
    <script>
        var settings = {
		alpha: false, //enables to have alpha in the canvas to blend with background
		stencil: true,
		redraw: true, //force to redraw
		autoplay: Boolean(LS.queryString["autoplay"]),
		resources: "https://webglstudio.org/fileserver/",
		autoresize: true, //resize the 3D window if the browser window is resized
		loadingbar: true, //shows loading bar progress
		proxy: "https://webglstudio.org/projects/present/repository/files/" //allows to proxy request to avoid cross domain problems, in this case the @ means same domain, so it will be http://hostname/proxy
	};
        var BP = new BehaviourPlanner.Loader(settings)//new BehaviourPlanner(null,settings);
        var query_string = LS.queryString;
        if( query_string["session"] )
            player.setScene( JSON.parse( localStorage.getItem( query_tring["session"] ) ) );
        else if( (query_string["url"] && query_string["url"].indexOf("://") == -1) ) //for safety measures
            BP.loadPlanner( query_string["url"], BP.loadScene.bind(BP) ); //the url must be something like: fileserver/files/guest/projects/Lee_FX.json
        else if( query_string["preview"] === undefined )
            BP.loadConfig("config_BPplayer.json", BP.loadPlanner);
      //  BP.animate();
    </script>
   
    </body>
</html>
